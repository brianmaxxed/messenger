module.exports=function(e){var t={};function r(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(o,n,function(t){return e[t]}.bind(null,n));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="./dist/public/",r(r.s=14)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});r(1);class o{static addProp(e,t){if(e in o){const t=`Constant class c already has property '${e}' assigned`;throw new Error(t)}Object.defineProperty(o,e,{value:t,writable:!1})}}o.addProp("LEAN",!0),o.addProp("TRUE","true"),o.addProp("FALSE","false"),o.addProp("INDEX","index"),o.addProp("UNIQUE","unique"),o.addProp("SPARSE","sparse"),o.addProp("NESTED","NESTED"),o.addProp("PAGE_LIMIT",1e3),o.addProp("PER_PAGE_LIMIT",20),o.addProp("MULTI_PER_PAGE_LIMIT",10),o.addProp("SIGINT","SIGINT"),o.addProp("SIGTERM","SIGTERM"),o.addProp("EMPTY_STR",""),o.addProp("OFFLINE","offline"),o.addProp("DISABLED","disabled"),o.addProp("SOFT_DELETE","softDelete"),o.addProp("OPEN","open"),o.addProp("EXIT","exit"),o.addProp("CONNECTING","connecting"),o.addProp("CONNECTED","connected"),o.addProp("DISCONNECTION","disconnecting"),o.addProp("DISCONNECTED","disconnected"),o.addProp("CLOSE","close"),o.addProp("RECONNECT","reconnected"),o.addProp("ERROR","error"),o.addProp("FULLSETUP","fullsetup"),o.addProp("ALL","all"),o.addProp("BOOLEAN","boolean"),o.addProp("OBJECT","object"),o.addProp("STRING","string"),o.addProp("FUNCTION","function"),o.addProp("NUMBER","number"),o.addProp("UNDEFINED","undefined"),o.addProp("INSERT","insert"),o.addProp("UPDATE","update"),o.addProp("DELETE","delete"),Object.freeze(o),t.default=o},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){return e&&e.__esModule?e:{default:e}}(r(8));r(9).load({path:o.default.join(e,"../../.env"),sample:o.default.join(e,"../../.env.example")});const n={user:"brian",appName:"messengerBackend",debug:!0,debugLevel:"debug",debugDb:!1,debugExpress:!0,debugUnitTests:!1,stackTraceUnhandledErrors:!0,unitTestDbSuffix:"TEST_brian",host:"localhost",domain:process.env.DOMAIN,environment:"dev",port:"3100",mongo:{dbName:null,uri:null}};"test"==="dev".toLowerCase()&&process.env.TEST_ENV;n.mongo.dbName="moderation",n.mongo.uri="mongodb+srv://admin:admin123@cluster0-mozly.mongodb.net/moderation",t.default=n}).call(this,"src/config")},function(e,t){e.exports=require("mongoose")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(13));n(r(0));function n(e){return e&&e.__esModule?e:{default:e}}class a{}a.INTERNAL_ERROR={id:500,status:500,msg:"internal error."},a.SUCCESS={id:1,status:200,msg:o.default.OK},a.SUCCESSFUL_UPDATE={id:22,status:201,msg:"successful update."},a.INVALID_MODERATION_FIELDS={id:400,status:422,msg:"imageId, user, and approved (true/false) are required."},a.INVALID_LIST_FILTER={id:400,status:422,msg:"filter must be 'all', 'pending', 'approved', or 'rejected.'"},a.USER_DOESNT_EXIST={id:400,status:422,msg:"That user does not exist."},Object.freeze(a),t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={user:"user",image:"image"}},function(e,t,r){"use strict";var o=s(r(6)),n=(s(r(0)),s(r(3))),a=(s(r(30)),s(r(1)));function s(e){return e&&e.__esModule?e:{default:e}}const u=e=>{const t={};if(!e)return t;const{id:r=0,status:n=500,msg:a="internal error"}=e;if(t.id=r,t.status=n,t.msg=a,o.default.get(e,"errors"))t.errors=e.errors;else{t.errors=[];const o={error:{id:r,status:n,msg:a}};e.extra&&(o.extra=e.extra),t.errors.push(o)}return t},d=(e,t,r)=>{const n=Object.assign({},e);return n&&(n.error&&(n.errors?n.errors.push({msg:n.error.msg,stack:n.error.stack}):n.errors=[{error:n.error}],delete n.error,o.default.has(n,"status")||(n.status=n.errors[0].status||500)),t.type("json"),t.status(n.status||500).send(n)),t.headersSent||r(),n};e.exports={mapToArray:e=>{const t=[];return e.forEach((e,r,o)=>{t.push(e)}),t},wrapErrorCode:e=>[{error:e}],hasOnlyOne:(e={},t=[])=>{const r=t.filter(t=>t in e).map(t=>({field:t,value:e[t]}));return 1===r.length?r:[]},processResults:d,statusObject:(e,t={})=>{const{id:r,status:o,msg:n}=e;return{id:r,status:o,msg:n,data:t}},errorObject:u,unhandledErrorObject:e=>("production"!==a.default.environment||a.default.stackTraceUnhandledErrors?console.log(e.stack):console.log(`${e.message} ${e.extra}`),"production"!==a.default.environment||a.default.debug?u(e):u(n.default.INTERNAL_ERROR)),formatTimeLeft:e=>{const t=e/60>1?e/60:1;return`${t} minute${1!==t?"s":""}`},asynced:async(e,t,r)=>{const[o,n,a]=r,s=await e[t](o);return d(s,n,a),s},asyncForEachLinear:async(e,t)=>{for(const r of e)await t(r)},asyncForEach:async(e,t)=>{await Promise.all(e.map(t))}}},function(e,t){e.exports=require("lodash")},function(e,t){e.exports=require("express")},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("dotenv-safe")},function(e,t){e.exports=require("http")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a(r(12)),n=a(r(31));function a(e){return e&&e.__esModule?e:{default:e}}class s{constructor(){this.models=s.all}static get all(){return{user:new o.default,image:new n.default}}get all(){return Object.assign({},this.models)}}t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});s(r(6));var o=s(r(2)),n=(s(r(27)),s(r(28)),s(r(29))),a=(s(r(0)),s(r(3)),s(r(4)));s(r(5)),s(r(1));function s(e){return e&&e.__esModule?e:{default:e}}class u{static get Model(){return o.default.model(a.default.user,n.default)}get Model(){return u.Model}}t.default=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class o{}o.OK="OK",t.default=o},function(e,t,r){"use strict";var o=u(r(15)),n=u(r(1)),a=u(r(0)),s=r(16);function u(e){return e&&e.__esModule?e:{default:e}}n.default.debug&&o.default.install({environment:a.default.NODE}),n.default.debug&&r(35),process.on("SIGTERM",()=>{console.log("SIGTERM"),(0,s.shutdown)()}),process.on("SIGINT",()=>{console.log("SIGINT"),(0,s.shutdown)()}),(0,s.startup)(),e.exports={app:s.app,server:s.server,startup:s.startup,shutdown:s.shutdown}},function(e,t){e.exports=require("source-map-support")},function(e,t,r){"use strict";E(r(6));var o=E(r(7)),n=E(r(2)),a=E(r(10)),s=E(r(17)),u=E(r(18)),d=E(r(19)),l=(E(r(20)),E(r(21))),c=(E(r(8)),E(r(22)),E(r(23))),i=E(r(24)),f=(E(r(25)),E(r(0))),p=E(r(26)),g=E(r(1)),m=E(r(33));function E(e){return e&&e.__esModule?e:{default:e}}r(9).config();let _=null;const b=(0,o.default)();b.use((0,l.default)()),b.disable("x-powered-by"),b.use((0,i.default)()),b.use((0,c.default)()),b.use((0,d.default)({origin:"*",credentials:!0,optionsSuccessStatus:200,allowedHeaders:["Content-Type","Authorization","Accept","Accept-Encoding"]})),b.use(s.default.urlencoded({extended:!1})),b.use((e,t,r)=>{s.default.json({verify(e,t,r,o){e.rawBody=r.toString()}})(e,t,e=>{if(e){const r=-1!==e.message.indexOf("JSON")?e.message:"internal error";t.status(500).send({error:{status:500,msg:r}}),console.log(f.default.ERROR,{status:e.status||500,message:e.msg,error:e})}else r()})}),b.use((0,u.default)()),b.set("trust proxy",!0),b.set(f.default.PORT,g.default.port),g.default.debug&&g.default.debugExpress&&console.log("Overriding 'Express' logger"),b.use(m.default),e.exports={app:b,httpServer:_,startup:async e=>{try{const t=e||b.get(f.default.PORT);p.default.setDebug(g.default.debug),await p.default.connect(),(_=a.default.createServer(b)).listen(t),console.log("listening at http://%s:%d",g.default.host,t)}catch(e){console.log("Error: ",e.stack)}return _},shutdown:async(e=!0)=>{console.log(`app '${g.default.appName}' terminating.`),console.log("closing server...");try{await _.close(),console.log("express server close."),await n.default.connection.close(),console.log("Mongoose default connection disconnected."),n.default.connection.removeAllListeners()}catch(e){console.log("Uncaught Shutdown Error:",e.stack)}return console.log("Finally exiting."),e&&process.exit(1),null}}},function(e,t){e.exports=require("body-parser")},function(e,t){e.exports=require("cookie-parser")},function(e,t){e.exports=require("cors")},function(e,t){e.exports=require("csurf")},function(e,t){e.exports=require("helmet")},function(e,t){e.exports=require("fs")},function(e,t){e.exports=require("compression")},function(e,t){e.exports=require("response-time")},function(e,t){e.exports=require("method-override")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=d(r(2)),n=d(r(11)),a=d(r(1)),s=d(r(0)),u=d(r(5));function d(e){return e&&e.__esModule?e:{default:e}}const l={db:null,test:!1};t.default={get:()=>l.db,setAsTest:()=>{l.test=!0},setDebug:e=>{a.default.debugDb&&(o.default.connection.removeAllListeners(),o.default.set(s.default.DEBUG,!0),a.default.debug&&console.log(`starting in debug mode; env=${a.default.environment}`),[s.default.CONNECTING,s.default.CONNECTED,s.default.OPEN,s.default.DISCONNECTING,s.default.DISCONNECTED,s.default.CLOSE,s.default.RECONNECTED,s.default.ERROR,s.default.ALL,s.default.INDEX].forEach(e=>{o.default.connection.on(e,()=>{console.log(`Mongoose event ${e}`)})}))},connect:async(e,t)=>{const r=e||`${a.default.mongo.uri}`,n=t||`${a.default.mongo.dbName}`,s={dbName:n||a.default.mongo.dbName,reconnectTries:5,reconnectInterval:500,keepAlive:!0,config:{autoIndex:!1,background:!1}};a.default.debug&&(console.log(`mongo Uri: ${r}`),console.log(`mongo Db: ${n}`));try{const e=await o.default.connect(r,s);return l.db=e,l.db}catch(e){return console.log("Error: ",e.stack),null}},createIndexes:async()=>{try{const e=n.default.all;await u.default.asyncForEach(Object.keys(e),async t=>{e[t]&&e[t].Model&&(e[t].Model.collection&&(await e[t].Model.collection.getIndexes(),await e[t].Model.collection.dropIndexes()),await e[t].Model.createIndexes())})}catch(e){return console.log(e),u.default.unhandledErrorObject(e)}}}},function(e,t){e.exports=require("moment")},function(e,t){e.exports=require("uuid/v4")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),n=a(r(4));a(r(0));function a(e){return e&&e.__esModule?e:{default:e}}const s=new o.Schema({userId:{type:String,required:!0},user:{type:String,minlength:2,maxlength:16}},{autoIndex:!0,timestamps:!0,collection:n.default.user});s.index({accountId:1,user:1},{unique:!0}),s.index({accountId:1,userId:1},{unique:!0}),t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});o(r(13)),o(r(0));function o(e){return e&&e.__esModule?e:{default:e}}class n{}n.INTERNAL_ERROR={id:500,status:500,msg:"internal error."},n.ENUM_PROP_NOT_FOUND={id:10001,status:400,msg:"enum property does not exist."},n.INVALID_FIELD_SOURCE_TYPE={id:10001,status:400,msg:"invalid source field type, use: params or body."},n.INVALID_VALIDATION_FIELD={id:10002,status:400,msg:"that validation field is not in the validation map."},n.TEST={id:1,status:1,msg:"test"},Object.freeze(n),t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=l(r(2)),n=l(r(32)),a=l(r(12)),s=(l(r(0)),l(r(3))),u=l(r(4)),d=l(r(5));function l(e){return e&&e.__esModule?e:{default:e}}class c{static get Model(){return o.default.model(u.default.Image,n.default)}get Model(){return c.Model}async list(e={}){const{filter:t="all"}=e.params;if(!["all","pending","approved","rejected"].includes(t))return s.default.INVALID_LIST_FILTER;let r={};switch(t){case"pending":r={approved:{$exists:!1},moderatorId:{$exists:!1}};break;case"approved":r={approved:!0};break;case"rejected":r={approved:!1};break;default:r={}}try{const e=await c.Model.find(r).sort({ts:1}).lean();return{status:s.default.SUCCESS.status,data:{message:e}}}catch(e){return d.default.unhandledErrorObject(e)}}async nextUnmoderated(e={}){try{const e=await c.Model.find({approved:{$exists:!1},moderatorId:{$exists:!1}}).sort({ts:1}).limit(1);return{status:s.default.SUCCESS.status,data:{message:e}}}catch(e){return d.default.unhandledErrorObject(e)}}async moderate(e={}){const{imageId:t,user:r,approved:n}=e.body;if(console.log(t,r,n),!t||!r||"boolean"!=typeof n)return s.default.INVALID_MODERATION_FIELDS;const u=await a.default.Model.find({user:r}).lean();if(u.length<1)return s.default.USER_DOESNT_EXIST;const{ObjectId:l}=o.default.Types;try{const e=await c.Model.updateOne({_id:new l(t)},{$set:{moderatorId:u[0].userId,approved:n}});return{status:s.default.SUCCESS.status,data:{message:1===e.nModified}}}catch(e){return d.default.unhandledErrorObject(e)}}async moderated(e={}){try{const{user:t}=e.query;if(!t)return s.default.USER_DOESNT_EXIST;const r=await a.default.Model.find({user:t}).lean();if(r.length<1)return s.default.USER_DOESNT_EXIST;const o=await c.Model.find({moderatorId:r[0].userId}).sort({updatedAt:-1}).limit(5).skip(0).lean();return{status:s.default.SUCCESS.status,data:{message:o}}}catch(e){return d.default.unhandledErrorObject(e)}}async clear(e={}){try{const e=await c.Model.updateMany({},{$unset:{moderatorId:null,approved:null}});return{status:s.default.SUCCESS.status,data:{message:e}}}catch(e){return d.default.unhandledErrorObject(e)}}}t.default=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),n=a(r(4));a(r(0));function a(e){return e&&e.__esModule?e:{default:e}}const s=new o.Schema({ts:{type:Number,required:!0},url:{type:String,required:!0},moderatorId:{type:Number,default:void 0},approved:{type:Boolean,default:void 0}},{autoIndex:!0,timestamps:!0,collection:n.default.image});s.index({ts:1}),s.index({url:1},{unique:!0}),t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=s(r(7)),n=(s(r(10)),s(r(0)),s(r(3)),s(r(34))),a=s(r(11));function s(e){return e&&e.__esModule?e:{default:e}}const u=o.default.Router(),d=a.default.all;u.use("/api/v1/image",n.default.routes(d.image)),u.use((e,t,r)=>{const o=new Error("Not Found");o.status=404,r(o)}),u.use((e,t,r,o)=>{const n=e.status?e.status:500;let a=`${n}: ${e.message}`;Array.isArray(a)||(a=[a]);const s={errors:a};e.data&&(s.errors=e.data),r.status(n).send(s)}),t.default=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a(r(7)),n=(a(r(0)),a(r(3)),r(5));a(n);function a(e){return e&&e.__esModule?e:{default:e}}t.default=class{static routes(e){const t=o.default.Router();return t.get("/clear",async(...t)=>{await(0,n.asynced)(e,"clear",t)}),t.get("/list",async(...t)=>{await(0,n.asynced)(e,"list",t)}),t.get("/list/:filter",async(...t)=>{await(0,n.asynced)(e,"list",t)}),t.get("/next",async(...t)=>{await(0,n.asynced)(e,"nextUnmoderated",t)}),t.put("/moderate",async(...t)=>{await(0,n.asynced)(e,"moderate",t)}),t.get("/moderated",async(...t)=>{await(0,n.asynced)(e,"moderated",t)}),console.log("####"),t}}},function(e,t,r){"use strict";var o=n(r(1));n(r(0));function n(e){return e&&e.__esModule?e:{default:e}}o.default.debug&&(process.on("unhandledRejection",(e,t)=>{console.log("unhandledRejection...");let r="";t&&(r=`Unhandled Rejection at: Promise${t}`),console.log("reason:",r,e)}),process.on("uncaughtException",e=>{console.log("Error: ",e.stack)}))}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbmZpZy9jb25zdHMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbmZpZy9lbnYuanMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwibW9uZ29vc2VcIiIsIndlYnBhY2s6Ly8vLi9zcmMvY29uZmlnL3N0YXR1c0NvZGVzLmpzIiwid2VicGFjazovLy8uL3NyYy9tb2RlbHMvY29uc3RzL21vZGVscy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvdXRpbHMvaGVscGVyLmpzIiwid2VicGFjazovLy9leHRlcm5hbCBcImxvZGFzaFwiIiwid2VicGFjazovLy9leHRlcm5hbCBcImV4cHJlc3NcIiIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJwYXRoXCIiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiZG90ZW52LXNhZmVcIiIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJodHRwXCIiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZGVscy9Nb2RlbHMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZGVscy9Vc2VyLmpzIiwid2VicGFjazovLy8uL3NyYy9jb25maWcvbWVzc2FnZXMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NlcnZlci5qcyIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJzb3VyY2UtbWFwLXN1cHBvcnRcIiIsIndlYnBhY2s6Ly8vLi9zcmMvZXhwcmVzcy5qcyIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJib2R5LXBhcnNlclwiIiwid2VicGFjazovLy9leHRlcm5hbCBcImNvb2tpZS1wYXJzZXJcIiIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJjb3JzXCIiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiY3N1cmZcIiIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJoZWxtZXRcIiIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJmc1wiIiwid2VicGFjazovLy9leHRlcm5hbCBcImNvbXByZXNzaW9uXCIiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwicmVzcG9uc2UtdGltZVwiIiwid2VicGFjazovLy9leHRlcm5hbCBcIm1ldGhvZC1vdmVycmlkZVwiIiwid2VicGFjazovLy8uL3NyYy9jb25maWcvbW9uZ29vc2UuanMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwibW9tZW50XCIiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwidXVpZC92NFwiIiwid2VicGFjazovLy8uL3NyYy9tb2RlbHMvc2NoZW1hcy9Vc2VyU2NoZW1hLmpzIiwid2VicGFjazovLy8uL3NyYy9jb25maWcvZXJyb3JDb2Rlcy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWxzL0ltYWdlLmpzIiwid2VicGFjazovLy8uL3NyYy9tb2RlbHMvc2NoZW1hcy9JbWFnZVNjaGVtYS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29udHJvbGxlcnMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbnRyb2xsZXJzL0ltYWdlLmpzIiwid2VicGFjazovLy8uL3NyYy91dGlscy9wcm9jZXNzRXZlbnRzLmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiW29iamVjdCBPYmplY3RdIiwicHJvcCIsIm1zZyIsIkVycm9yIiwid3JpdGFibGUiLCJhZGRQcm9wIiwiZnJlZXplIiwibG9hZCIsInBhdGgiLCJqb2luIiwiX19kaXJuYW1lIiwic2FtcGxlIiwiZW52IiwidXNlciIsImFwcE5hbWUiLCJkZWJ1ZyIsImRlYnVnTGV2ZWwiLCJkZWJ1Z0RiIiwiZGVidWdFeHByZXNzIiwiZGVidWdVbml0VGVzdHMiLCJzdGFja1RyYWNlVW5oYW5kbGVkRXJyb3JzIiwidW5pdFRlc3REYlN1ZmZpeCIsImhvc3QiLCJkb21haW4iLCJwcm9jZXNzIiwiRE9NQUlOIiwiZW52aXJvbm1lbnQiLCJwb3J0IiwibW9uZ28iLCJkYk5hbWUiLCJ1cmkiLCJ0b0xvd2VyQ2FzZSIsIlRFU1RfRU5WIiwicmVxdWlyZSIsInNjIiwiSU5URVJOQUxfRVJST1IiLCJpZCIsInN0YXR1cyIsIlNVQ0NFU1MiLCJPSyIsIlNVQ0NFU1NGVUxfVVBEQVRFIiwiSU5WQUxJRF9NT0RFUkFUSU9OX0ZJRUxEUyIsIklOVkFMSURfTElTVF9GSUxURVIiLCJVU0VSX0RPRVNOVF9FWElTVCIsImltYWdlIiwiZXJyb3JPYmplY3QiLCJlcnJvciIsIm91dHB1dCIsIl8iLCJlcnJvcnMiLCJlIiwiZXh0cmEiLCJwdXNoIiwicHJvY2Vzc1Jlc3VsdHMiLCJwYXlsb2FkIiwicmVzIiwibmV4dCIsImFzc2lnbiIsInN0YWNrIiwiaGFzIiwidHlwZSIsInNlbmQiLCJoZWFkZXJzU2VudCIsIm1hcFRvQXJyYXkiLCJtYXAiLCJmb3JFYWNoIiwid3JhcEVycm9yQ29kZSIsImhhc09ubHlPbmUiLCJvYmoiLCJmaWVsZHMiLCJvdXQiLCJmaWx0ZXIiLCJmIiwiayIsImZpZWxkIiwibGVuZ3RoIiwic3RhdHVzT2JqZWN0IiwiZGF0YSIsInVuaGFuZGxlZEVycm9yT2JqZWN0IiwiY29uc29sZSIsImxvZyIsIm1lc3NhZ2UiLCJmb3JtYXRUaW1lTGVmdCIsInRpbWUiLCJtaW51dGVzIiwiYXN5bmNlZCIsImFzeW5jIiwiaW5zdCIsImZuIiwicGFyYW1zIiwicmVxIiwiYXN5bmNGb3JFYWNoTGluZWFyIiwiYXIiLCJhc3luY0ZvckVhY2giLCJQcm9taXNlIiwiYWxsIiwiTW9kZWxzIiwiY29uc3RydWN0b3IiLCJ0aGlzIiwibW9kZWxzIiwiVXNlciIsIkltYWdlIiwiTW9kZWwiLCJtb25nb29zZSIsIm1vZGVsIiwiVXNlclNjaGVtYSIsIl9leHByZXNzIiwic291cmNlTWFwU3VwcG9ydCIsImluc3RhbGwiLCJOT0RFIiwib24iLCJzaHV0ZG93biIsInN0YXJ0dXAiLCJhcHAiLCJzZXJ2ZXIiLCJjb25maWciLCJodHRwU2VydmVyIiwiX2V4cHJlc3MyIiwiZGVmYXVsdCIsInVzZSIsIl9oZWxtZXQyIiwiZGlzYWJsZSIsIl9yZXNwb25zZVRpbWUyIiwiX2NvbXByZXNzaW9uMiIsIl9jb3JzMiIsIm9yaWdpbiIsImNyZWRlbnRpYWxzIiwib3B0aW9uc1N1Y2Nlc3NTdGF0dXMiLCJhbGxvd2VkSGVhZGVycyIsImJvZHlQYXJzZXIiLCJ1cmxlbmNvZGVkIiwiZXh0ZW5kZWQiLCJqc29uIiwidmVyaWZ5IiwiYnVmIiwiZW5jb2RpbmciLCJyYXdCb2R5IiwidG9TdHJpbmciLCJlcnIiLCJpbmRleE9mIiwiRVJST1IiLCJfY29va2llUGFyc2VyMiIsInNldCIsIlBPUlQiLCJjb250cm9sbGVycyIsIm92ZXJyaWRlUG9ydCIsInNldERlYnVnIiwiY29ubmVjdCIsImh0dHAiLCJjcmVhdGVTZXJ2ZXIiLCJsaXN0ZW4iLCJjYW5FeGl0IiwiY2xvc2UiLCJjb25uZWN0aW9uIiwicmVtb3ZlQWxsTGlzdGVuZXJzIiwiZXhpdCIsInN0YXRlIiwiZGIiLCJ0ZXN0Iiwic2V0QXNUZXN0IiwiREVCVUciLCJDT05ORUNUSU5HIiwiQ09OTkVDVEVEIiwiT1BFTiIsIkRJU0NPTk5FQ1RJTkciLCJESVNDT05ORUNURUQiLCJDTE9TRSIsIlJFQ09OTkVDVEVEIiwiQUxMIiwiSU5ERVgiLCJldmVudCIsIm1vbmdvVXJpIiwib3B0cyIsInJlY29ubmVjdFRyaWVzIiwicmVjb25uZWN0SW50ZXJ2YWwiLCJrZWVwQWxpdmUiLCJhdXRvSW5kZXgiLCJiYWNrZ3JvdW5kIiwiY29ubiIsImNyZWF0ZUluZGV4ZXMiLCJoIiwia2V5cyIsImNvbGxlY3Rpb24iLCJnZXRJbmRleGVzIiwiZHJvcEluZGV4ZXMiLCJfbW9uZ29vc2UiLCJTY2hlbWEiLCJ1c2VySWQiLCJTdHJpbmciLCJyZXF1aXJlZCIsIm1pbmxlbmd0aCIsIm1heGxlbmd0aCIsInRpbWVzdGFtcHMiLCJpbmRleCIsImFjY291bnRJZCIsInVuaXF1ZSIsImVjIiwiRU5VTV9QUk9QX05PVF9GT1VORCIsIklOVkFMSURfRklFTERfU09VUkNFX1RZUEUiLCJJTlZBTElEX1ZBTElEQVRJT05fRklFTEQiLCJURVNUIiwiSW1hZ2VTY2hlbWEiLCJpbmNsdWRlcyIsImZpbmQiLCJhcHByb3ZlZCIsIiRleGlzdHMiLCJtb2RlcmF0b3JJZCIsInNvcnQiLCJ0cyIsImxlYW4iLCJsaW1pdCIsImltYWdlSWQiLCJib2R5IiwidSIsIk9iamVjdElkIiwiVHlwZXMiLCJ1cGRhdGVkIiwidXBkYXRlT25lIiwiX2lkIiwiJHNldCIsIm5Nb2RpZmllZCIsInF1ZXJ5IiwidXBkYXRlZEF0Iiwic2tpcCIsInVwZGF0ZU1hbnkiLCIkdW5zZXQiLCJOdW1iZXIiLCJ1cmwiLCJCb29sZWFuIiwicm91dGVyIiwiZXhwcmVzcyIsIlJvdXRlciIsInJvdXRlcyIsIkFycmF5IiwiaXNBcnJheSIsInJlc3BvbnNlIiwiX2hlbHBlciIsInB1dCIsInJlYXNvbiIsInByb20iXSwibWFwcGluZ3MiOiIyQkFDQSxJQUFBQSxLQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBQyxRQUdBLElBQUFDLEVBQUFKLEVBQUFFLElBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsWUFVQSxPQU5BSSxFQUFBTCxHQUFBTSxLQUFBSixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBRixHQUdBRyxFQUFBRSxHQUFBLEVBR0FGLEVBQUFELFFBMERBLE9BckRBRixFQUFBUSxFQUFBRixFQUdBTixFQUFBUyxFQUFBVixFQUdBQyxFQUFBVSxFQUFBLFNBQUFSLEVBQUFTLEVBQUFDLEdB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aUZDekNmLFFBQUF6USxFQUFBLElBSUFnUixLQUZBaFIsRUFBQSxNQUNBQSxFQUFBLElBQ0FBLEVBQUEsNEVBR0VvQyxjQUFjNUIsR0FDWixNQUFNVSxFQUFJd1AsVUFBUUMsU0FvQmxCLE9BakJBelAsRUFBRUQsSUFBSSxTQUFVeUcsU0FBVXhGLFdBQWMsRUFBQThPLEVBQUF2SixTQUFRakgsRUFBRyxRQUFTMEIsS0FHNURoQixFQUFFRCxJQUFJLFFBQVN5RyxTQUFVeEYsV0FBYyxFQUFBOE8sRUFBQXZKLFNBQVFqSCxFQUFHLE9BQVEwQixLQUUxRGhCLEVBQUVELElBQUksZ0JBQWlCeUcsU0FBVXhGLFdBQWMsRUFBQThPLEVBQUF2SixTQUFRakgsRUFBRyxPQUFRMEIsS0FHbEVoQixFQUFFRCxJQUFJLFFBQVN5RyxTQUFVeEYsV0FBYyxFQUFBOE8sRUFBQXZKLFNBQVFqSCxFQUFHLGtCQUFtQjBCLEtBR3JFaEIsRUFBRStQLElBQUksWUFBYXZKLFNBQVV4RixXQUFjLEVBQUE4TyxFQUFBdkosU0FBUWpILEVBQUcsV0FBWTBCLEtBR2xFaEIsRUFBRUQsSUFBSSxhQUFjeUcsU0FBVXhGLFdBQWMsRUFBQThPLEVBQUF2SixTQUFRakgsRUFBRyxZQUFhMEIsS0FFcEVpRixRQUFRQyxJQUFJLFFBQ0xsRyxrQ0M1QlgsUUFBQWxCLEVBQUEsTUFDQUEsRUFBQSx1REFJSWdELFVBQUlHLFFBQ05TLFFBQVFzRixHQUFHLHFCQUFzQixDQUFDZ0ksRUFBUWhQLEtBQ3hDaUYsUUFBUUMsSUFBSSx5QkFDWixJQUFJK0osRUFBTyxHQUNQalAsSUFDRmlQLG9DQUF5Q2pQLEtBRTNDaUYsUUFBUUMsSUFBSSxVQUFXK0osRUFBTUQsS0FJL0J0TixRQUFRc0YsR0FBRyxvQkFBc0I1RCxJQUUvQjZCLFFBQVFDLElBQUksVUFBVzlCLEVBQUVRIiwiZmlsZSI6InNlcnZlci5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiLi9kaXN0L3B1YmxpYy9cIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDE0KTtcbiIsImltcG9ydCB7IGVudmlyb25tZW50LCBkb21haW4gfSBmcm9tICcuLi9jb25maWcvZW52JztcblxuY2xhc3MgYyB7XG4gIHN0YXRpYyBhZGRQcm9wKHByb3AsIHZhbHVlKSB7XG4gICAgaWYgKCEocHJvcCBpbiBjKSkge1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGMsIHByb3AsIHsgdmFsdWUsIHdyaXRhYmxlOiBmYWxzZSB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgbXNnID0gYENvbnN0YW50IGNsYXNzIGMgYWxyZWFkeSBoYXMgcHJvcGVydHkgJyR7cHJvcH0nIGFzc2lnbmVkYDtcbiAgICAgIHRocm93IG5ldyBFcnJvcihtc2cpO1xuICAgIH1cbiAgfVxufVxuXG5jLmFkZFByb3AoJ0xFQU4nLCB0cnVlKTsgLy8gbW9kZWwgbGVhbiBvciBmdWxsIG1vbmdvb3NlIG9iamVjdC5cblxuYy5hZGRQcm9wKCdUUlVFJywgJ3RydWUnKTtcbmMuYWRkUHJvcCgnRkFMU0UnLCAnZmFsc2UnKTtcblxuYy5hZGRQcm9wKCdJTkRFWCcsICdpbmRleCcpO1xuYy5hZGRQcm9wKCdVTklRVUUnLCAndW5pcXVlJyk7XG5jLmFkZFByb3AoJ1NQQVJTRScsICdzcGFyc2UnKTtcblxuYy5hZGRQcm9wKCdORVNURUQnLCAnTkVTVEVEJyk7XG5cbmMuYWRkUHJvcCgnUEFHRV9MSU1JVCcsIDEwMDApO1xuYy5hZGRQcm9wKCdQRVJfUEFHRV9MSU1JVCcsIDIwKTtcbmMuYWRkUHJvcCgnTVVMVElfUEVSX1BBR0VfTElNSVQnLCAxMCk7XG5cbmMuYWRkUHJvcCgnU0lHSU5UJywgJ1NJR0lOVCcpO1xuYy5hZGRQcm9wKCdTSUdURVJNJywgJ1NJR1RFUk0nKTtcblxuLy8gdXNlZnVsIHN0cmluZ3MgKG1vbmdvb3NlIGV2ZW50cycsIHN0cmluZ3MnLCBldGMpXG5jLmFkZFByb3AoJ0VNUFRZX1NUUicsICcnKTtcblxuYy5hZGRQcm9wKCdPRkZMSU5FJywgJ29mZmxpbmUnKTtcbmMuYWRkUHJvcCgnRElTQUJMRUQnLCAnZGlzYWJsZWQnKTtcbmMuYWRkUHJvcCgnU09GVF9ERUxFVEUnLCAnc29mdERlbGV0ZScpO1xuXG5jLmFkZFByb3AoJ09QRU4nLCAnb3BlbicpO1xuYy5hZGRQcm9wKCdFWElUJywgJ2V4aXQnKTtcbmMuYWRkUHJvcCgnQ09OTkVDVElORycsICdjb25uZWN0aW5nJyk7XG5jLmFkZFByb3AoJ0NPTk5FQ1RFRCcsICdjb25uZWN0ZWQnKTtcbmMuYWRkUHJvcCgnRElTQ09OTkVDVElPTicsICdkaXNjb25uZWN0aW5nJyk7XG5jLmFkZFByb3AoJ0RJU0NPTk5FQ1RFRCcsICdkaXNjb25uZWN0ZWQnKTtcbmMuYWRkUHJvcCgnQ0xPU0UnLCAnY2xvc2UnKTtcbmMuYWRkUHJvcCgnUkVDT05ORUNUJywgJ3JlY29ubmVjdGVkJyk7XG5jLmFkZFByb3AoJ0VSUk9SJywgJ2Vycm9yJyk7XG5jLmFkZFByb3AoJ0ZVTExTRVRVUCcsICdmdWxsc2V0dXAnKTtcbmMuYWRkUHJvcCgnQUxMJywgJ2FsbCcpO1xuXG5jLmFkZFByb3AoJ0JPT0xFQU4nLCAnYm9vbGVhbicpO1xuYy5hZGRQcm9wKCdPQkpFQ1QnLCAnb2JqZWN0Jyk7XG5jLmFkZFByb3AoJ1NUUklORycsICdzdHJpbmcnKTtcbmMuYWRkUHJvcCgnRlVOQ1RJT04nLCAnZnVuY3Rpb24nKTtcbmMuYWRkUHJvcCgnTlVNQkVSJywgJ251bWJlcicpO1xuYy5hZGRQcm9wKCdVTkRFRklORUQnLCAndW5kZWZpbmVkJyk7XG5cbmMuYWRkUHJvcCgnSU5TRVJUJywgJ2luc2VydCcpO1xuYy5hZGRQcm9wKCdVUERBVEUnLCAndXBkYXRlJyk7XG5jLmFkZFByb3AoJ0RFTEVURScsICdkZWxldGUnKTtcblxuT2JqZWN0LmZyZWV6ZShjKTtcblxuZXhwb3J0IGRlZmF1bHQgYztcbiIsImltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xuXG4vLyBpbXBvcnQgLmVudiB2YXJpYWJsZXNcbnJlcXVpcmUoJ2RvdGVudi1zYWZlJykubG9hZCh7XG4gIHBhdGg6IHBhdGguam9pbihfX2Rpcm5hbWUsICcuLi8uLi8uZW52JyksXG4gIHNhbXBsZTogcGF0aC5qb2luKF9fZGlybmFtZSwgJy4uLy4uLy5lbnYuZXhhbXBsZScpLFxufSk7XG5cbmNvbnN0IGVudiA9IHtcbiAgdXNlcjogcHJvY2Vzcy5lbnYuVVNFUixcbiAgYXBwTmFtZTogcHJvY2Vzcy5lbnYuQVBQX05BTUUsXG4gIGRlYnVnOiBwcm9jZXNzLmVudi5ERUJVRyA9PT0gJ3RydWUnLFxuICBkZWJ1Z0xldmVsOiBwcm9jZXNzLmVudi5ERUJVR19MRVZFTCxcbiAgZGVidWdEYjogcHJvY2Vzcy5lbnYuREVCVUdfREIgPT09ICd0cnVlJyxcbiAgZGVidWdFeHByZXNzOiBwcm9jZXNzLmVudi5ERUJVR19FWFBSRVNTID09PSAndHJ1ZScsXG4gIGRlYnVnVW5pdFRlc3RzOiBwcm9jZXNzLmVudi5ERUJVR19VTklUX1RFU1RTID09PSAndHJ1ZScsXG4gIHN0YWNrVHJhY2VVbmhhbmRsZWRFcnJvcnM6IHByb2Nlc3MuZW52LlNUQUNLVFJBQ0VfVU5IQU5ETEVEX0VSUk9SUyA9PT0gJ3RydWUnLFxuICB1bml0VGVzdERiU3VmZml4OiBgJHtwcm9jZXNzLmVudi5VTklUX1RFU1RfREJfU1VGRklYfV8ke3Byb2Nlc3MuZW52LlVTRVJ9YCxcbiAgaG9zdDogcHJvY2Vzcy5lbnYuSE9TVCxcbiAgZG9tYWluOiBwcm9jZXNzLmVudi5ET01BSU4sXG4gIGVudmlyb25tZW50OiBwcm9jZXNzLmVudi5OT0RFX0VOVixcbiAgcG9ydDogcHJvY2Vzcy5lbnYuUE9SVCxcbiAgbW9uZ286IHtcbiAgICBkYk5hbWU6IG51bGwsXG4gICAgdXJpOiBudWxsLFxuICB9LFxufTtcblxuY29uc3QgZW52aXJvbm1lbnQgPSBwcm9jZXNzLmVudi5OT0RFX0VOVi50b0xvd2VyQ2FzZSgpID09PSAndGVzdCdcbiAgPyBwcm9jZXNzLmVudi5URVNUX0VOViA6IHByb2Nlc3MuZW52Lk5PREVfRU5WO1xuXG5lbnYubW9uZ28uZGJOYW1lID0gcHJvY2Vzcy5lbnYuTU9OR09fREVWX0RCO1xuZW52Lm1vbmdvLnVyaSA9IHByb2Nlc3MuZW52Lk1PTkdPX0RFVl9VUkk7XG5cbmV4cG9ydCBkZWZhdWx0IGVudjtcbiIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIm1vbmdvb3NlXCIpOyIsImltcG9ydCBtIGZyb20gJy4vbWVzc2FnZXMnO1xuaW1wb3J0IGMgZnJvbSAnLi9jb25zdHMnO1xuXG5jbGFzcyBzYyB7fVxuXG5zYy5JTlRFUk5BTF9FUlJPUiA9IHtcbiAgaWQ6IDUwMCxcbiAgc3RhdHVzOiA1MDAsXG4gIG1zZzogJ2ludGVybmFsIGVycm9yLicsXG59O1xuXG5zYy5TVUNDRVNTID0ge1xuICBpZDogMSxcbiAgc3RhdHVzOiAyMDAsXG4gIG1zZzogbS5PSyxcbn07XG5cbnNjLlNVQ0NFU1NGVUxfVVBEQVRFID0geyBpZDogMjIsIHN0YXR1czogMjAxLCBtc2c6ICdzdWNjZXNzZnVsIHVwZGF0ZS4nIH07XG5cbnNjLklOVkFMSURfTU9ERVJBVElPTl9GSUVMRFMgPSB7XG4gIGlkOiA0MDAsXG4gIHN0YXR1czogNDIyLFxuICBtc2c6ICdpbWFnZUlkLCB1c2VyLCBhbmQgYXBwcm92ZWQgKHRydWUvZmFsc2UpIGFyZSByZXF1aXJlZC4nLFxufTtcblxuc2MuSU5WQUxJRF9MSVNUX0ZJTFRFUiA9IHtcbiAgaWQ6IDQwMCxcbiAgc3RhdHVzOiA0MjIsXG4gIG1zZzogJ2ZpbHRlciBtdXN0IGJlIFxcJ2FsbFxcJywgXFwncGVuZGluZ1xcJywgXFwnYXBwcm92ZWRcXCcsIG9yIFxcJ3JlamVjdGVkLlxcJycsXG59O1xuXG5zYy5VU0VSX0RPRVNOVF9FWElTVCA9IHtcbiAgaWQ6IDQwMCxcbiAgc3RhdHVzOiA0MjIsXG4gIG1zZzogJ1RoYXQgdXNlciBkb2VzIG5vdCBleGlzdC4nLFxufTtcblxuT2JqZWN0LmZyZWV6ZShzYyk7XG5cbmV4cG9ydCBkZWZhdWx0IHNjO1xuIiwiXG5leHBvcnQgZGVmYXVsdCB7XG4gIHVzZXI6ICd1c2VyJyxcbiAgaW1hZ2U6ICdpbWFnZScsXG59O1xuIiwiLypcbiAgZXNsaW50IG5vLXVzZWxlc3MtZXNjYXBlOjAsIG5vLXVzZWxlc3MtY29uY2F0OjAsXG4gIG5vLXNoYWRvdzowLCBuby1yZXN0cmljdGVkLXN5bnRheDowLCBuby1hd2FpdC1pbi1sb29wOjBcbiovXG5cbmltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5cbmltcG9ydCBjIGZyb20gJy4uL2NvbmZpZy9jb25zdHMnO1xuaW1wb3J0IHNjIGZyb20gJy4uL2NvbmZpZy9zdGF0dXNDb2Rlcyc7XG5pbXBvcnQgZWMgZnJvbSAnLi4vY29uZmlnL2Vycm9yQ29kZXMnO1xuaW1wb3J0IGVudiBmcm9tICcuLi9jb25maWcvZW52JztcblxuY29uc3QgbWFwVG9BcnJheSA9IChtYXApID0+IHtcbiAgY29uc3Qgb3V0cHV0ID0gW107XG5cbiAgbWFwLmZvckVhY2goKHZhbHVlLCBrZXksIG1hcCkgPT4ge1xuICAgIG91dHB1dC5wdXNoKHZhbHVlKTtcbiAgfSk7XG5cbiAgcmV0dXJuIG91dHB1dDtcbn07XG5cblxuY29uc3Qgd3JhcEFzeW5jID0gYXN5bmMgZm4gPT5cbiAgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgUHJvbWlzZS5yZXNvbHZlKGZuKHJlcSwgcmVzLCBuZXh0KSlcbiAgICAgIC5jYXRjaChuZXh0KTtcbiAgfTtcblxuY29uc3Qgc3RhdHVzT2JqZWN0ID0gKHNjLCBvdXRwdXQgPSB7fSkgPT4ge1xuICBjb25zdCB7IGlkLCBzdGF0dXMsIG1zZyB9ID0gc2M7XG4gIHJldHVybiB7XG4gICAgaWQsXG4gICAgc3RhdHVzLCAvLyBUT0RPOiBuZWVkIHRvIGNvbnNvbGlkYXRlIHNjIHRvIHN0YXR1cyBub3QgY29kZS5cbiAgICBtc2csXG4gICAgZGF0YTogb3V0cHV0LFxuICB9O1xufTtcblxuY29uc3QgaGFzT25seU9uZSA9IChvYmogPSB7fSwgZmllbGRzID0gW10pID0+IHtcbiAgY29uc3Qgb3V0ID0gZmllbGRzLmZpbHRlcihmID0+IGYgaW4gb2JqKS5tYXAoayA9PiAoeyBmaWVsZDogaywgdmFsdWU6IG9ialtrXSB9KSk7XG4gIHJldHVybiAob3V0Lmxlbmd0aCA9PT0gMSkgPyBvdXQgOiBbXTtcbn07XG5cbmNvbnN0IHdyYXBFcnJvckNvZGUgPSBlcnJvciA9PiAoW3sgZXJyb3IgfV0pO1xuXG5jb25zdCBlcnJvck9iamVjdCA9IChlcnJvcikgPT4ge1xuICBjb25zdCBvdXRwdXQgPSB7fTtcblxuICBpZiAoIWVycm9yKSB7XG4gICAgcmV0dXJuIG91dHB1dDtcbiAgfVxuXG4gIGNvbnN0IHsgaWQgPSAwLCBzdGF0dXMgPSA1MDAsIG1zZyA9ICdpbnRlcm5hbCBlcnJvcicgfSA9IGVycm9yO1xuXG4gIG91dHB1dC5pZCA9IGlkO1xuICBvdXRwdXQuc3RhdHVzID0gc3RhdHVzO1xuICBvdXRwdXQubXNnID0gbXNnO1xuXG4gIGlmIChfLmdldChlcnJvciwgJ2Vycm9ycycpKSB7XG4gICAgb3V0cHV0LmVycm9ycyA9IGVycm9yLmVycm9ycztcbiAgfSBlbHNlIHtcbiAgICBvdXRwdXQuZXJyb3JzID0gW107XG4gICAgY29uc3QgZSA9IHtcbiAgICAgIGVycm9yOiB7XG4gICAgICAgIGlkLFxuICAgICAgICBzdGF0dXMsXG4gICAgICAgIG1zZyxcbiAgICAgIH0sXG4gICAgfTtcblxuICAgIGlmIChlcnJvci5leHRyYSkgZS5leHRyYSA9IGVycm9yLmV4dHJhO1xuICAgIG91dHB1dC5lcnJvcnMucHVzaChlKTtcbiAgfVxuXG4gIHJldHVybiBvdXRwdXQ7XG59O1xuXG4vKlxuICBsb2cgYW4gdW5oYW5kbGVkIGVycm9yIGFuZCBvdXRwdXQgZXJyb3JPYmplY3QgZGVwZW5kaW5nIG9uIGRlYnVnIG9wdGlvbnNcblxuKi9cblxuY29uc3QgdW5oYW5kbGVkRXJyb3JPYmplY3QgPSAoZSkgPT4ge1xuICBpZiAoZW52LmVudmlyb25tZW50ID09PSAncHJvZHVjdGlvbicgJiYgIWVudi5zdGFja1RyYWNlVW5oYW5kbGVkRXJyb3JzKSB7XG4gICAgY29uc29sZS5sb2coYCR7ZS5tZXNzYWdlfSAke2UuZXh0cmF9YCk7XG4gIH0gZWxzZSB7XG4gICAgY29uc29sZS5sb2coZS5zdGFjayk7XG4gIH1cbiAgaWYgKGVudi5lbnZpcm9ubWVudCAhPT0gJ3Byb2R1Y3Rpb24nIHx8IGVudi5kZWJ1ZykgcmV0dXJuIGVycm9yT2JqZWN0KGUpO1xuICByZXR1cm4gZXJyb3JPYmplY3Qoc2MuSU5URVJOQUxfRVJST1IpO1xufTtcblxuY29uc3QgcHJvY2Vzc1Jlc3VsdHMgPSAocGF5bG9hZCwgcmVzLCBuZXh0KSA9PiB7XG4gIGNvbnN0IG91dHB1dCA9IE9iamVjdC5hc3NpZ24oe30sIHBheWxvYWQpO1xuXG4gIGlmIChvdXRwdXQpIHtcbiAgICBpZiAob3V0cHV0LmVycm9yKSB7XG4gICAgICBpZiAob3V0cHV0LmVycm9ycykge1xuICAgICAgICBvdXRwdXQuZXJyb3JzLnB1c2goeyBtc2c6IG91dHB1dC5lcnJvci5tc2csIHN0YWNrOiBvdXRwdXQuZXJyb3Iuc3RhY2sgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvdXRwdXQuZXJyb3JzID0gW3sgZXJyb3I6IG91dHB1dC5lcnJvciB9XTtcbiAgICAgIH1cbiAgICAgIGRlbGV0ZSBvdXRwdXQuZXJyb3I7XG4gICAgICBpZiAoIV8uaGFzKG91dHB1dCwgJ3N0YXR1cycpKSB7XG4gICAgICAgIG91dHB1dC5zdGF0dXMgPSBvdXRwdXQuZXJyb3JzWzBdLnN0YXR1cyB8fCA1MDA7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmVzLnR5cGUoJ2pzb24nKTtcbiAgICByZXMuc3RhdHVzKG91dHB1dC5zdGF0dXMgfHwgNTAwKS5zZW5kKG91dHB1dCk7XG4gIH1cblxuICBpZiAoIXJlcy5oZWFkZXJzU2VudCkge1xuICAgIG5leHQoKTtcbiAgfVxuXG4gIHJldHVybiBvdXRwdXQ7XG59O1xuXG5jb25zdCBhc3luY2VkID0gYXN5bmMgKGluc3QsIGZuLCBwYXJhbXMpID0+IHtcbiAgY29uc3QgW3JlcSwgcmVzLCBuZXh0XSA9IHBhcmFtcztcbiAgY29uc3Qgb3V0ID0gYXdhaXQgaW5zdFtmbl0ocmVxKTtcbiAgcHJvY2Vzc1Jlc3VsdHMob3V0LCByZXMsIG5leHQpO1xuXG4gIHJldHVybiBvdXQ7XG59O1xuXG5jb25zdCBhc3luY0ZvckVhY2hMaW5lYXIgPSBhc3luYyAoYXIsIGZuKSA9PiB7XG4gIGZvciAoY29uc3QgdCBvZiBhcikgeyBhd2FpdCBmbih0KTsgfVxufTtcblxuY29uc3QgYXN5bmNGb3JFYWNoID0gYXN5bmMgKGFyLCBmbikgPT4ge1xuICBhd2FpdCBQcm9taXNlLmFsbChhci5tYXAoZm4pKTtcbn07XG5cbmNvbnN0IGZvcm1hdFRpbWVMZWZ0ID0gKHRpbWUpID0+IHtcbiAgY29uc3QgbWludXRlcyA9ICh0aW1lKSAvIDYwID4gMSA/ICh0aW1lKSAvIDYwIDogMTtcbiAgcmV0dXJuIGAke21pbnV0ZXN9IG1pbnV0ZSR7KG1pbnV0ZXMgIT09IDEpID8gJ3MnIDogJyd9YDtcbn07XG5cbi8vIFRPRE86IG5vdCB1c2VkIGF0IHRoZSBtb21lbnQuXG5jb25zdCBlc2NhcGVSZWdFeHAgPSBzdHIgPT4gc3RyLnJlcGxhY2UoL1stXFwvXFxcXF4kKis/LigpfFtcXF17fV0vZywgJ1xcXFwkJicpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgbWFwVG9BcnJheSxcbiAgd3JhcEVycm9yQ29kZSxcbiAgaGFzT25seU9uZSxcbiAgcHJvY2Vzc1Jlc3VsdHMsXG4gIHN0YXR1c09iamVjdCxcbiAgZXJyb3JPYmplY3QsXG4gIHVuaGFuZGxlZEVycm9yT2JqZWN0LFxuICBmb3JtYXRUaW1lTGVmdCxcbiAgYXN5bmNlZCxcbiAgYXN5bmNGb3JFYWNoTGluZWFyLFxuICBhc3luY0ZvckVhY2gsXG59O1xuIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwibG9kYXNoXCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImV4cHJlc3NcIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwicGF0aFwiKTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJkb3RlbnYtc2FmZVwiKTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJodHRwXCIpOyIsImltcG9ydCBVc2VyIGZyb20gJy4vVXNlcic7XG5pbXBvcnQgSW1hZ2UgZnJvbSAnLi9JbWFnZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1vZGVscyB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMubW9kZWxzID0gTW9kZWxzLmFsbDtcbiAgfVxuXG4gIHN0YXRpYyBnZXQgYWxsKCkge1xuICAgIHJldHVybiB7XG4gICAgICB1c2VyOiBuZXcgVXNlcigpLFxuICAgICAgaW1hZ2U6IG5ldyBJbWFnZSgpLFxuICAgIH07XG4gIH1cblxuICBnZXQgYWxsKCkge1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCB0aGlzLm1vZGVscyk7XG4gIH1cbn1cbiIsIi8qIGVzbGludCBjbGFzcy1tZXRob2RzLXVzZS10aGlzOiAwLCBtYXgtbGVuOiAwLCB2YWxpZC10eXBlb2Y6MCwgbm8tZW1wdHktZnVuY3Rpb246MCAqL1xuaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCBtb25nb29zZSBmcm9tICdtb25nb29zZSc7XG5pbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7XG5pbXBvcnQgdXVpZHY0IGZyb20gJ3V1aWQvdjQnO1xuXG5pbXBvcnQgVXNlclNjaGVtYSBmcm9tICcuL3NjaGVtYXMvVXNlclNjaGVtYSc7XG5pbXBvcnQgYyBmcm9tICcuLi9jb25maWcvY29uc3RzJztcbmltcG9ydCBzYyBmcm9tICcuLi9jb25maWcvc3RhdHVzQ29kZXMnO1xuaW1wb3J0IG1vZGVscyBmcm9tICcuL2NvbnN0cy9tb2RlbHMnO1xuaW1wb3J0IGgsIHsgc3RhdHVzT2JqZWN0LCBlcnJvck9iamVjdCB9IGZyb20gJy4uL3V0aWxzL2hlbHBlcic7XG5pbXBvcnQgZW52IGZyb20gJy4uL2NvbmZpZy9lbnYnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VyIHtcbiAgc3RhdGljIGdldCBNb2RlbCgpIHtcbiAgICByZXR1cm4gbW9uZ29vc2UubW9kZWwobW9kZWxzLnVzZXIsIFVzZXJTY2hlbWEpO1xuICB9XG5cbiAgZ2V0IE1vZGVsKCkge1xuICAgIHJldHVybiBVc2VyLk1vZGVsO1xuICB9XG59XG4iLCIvLyBhIGxpc3Qgb2YgbWVzc2FnZXMgdXNlZCB0aHJvdWdob3V0IHRoZSBhcHAgZm9yIGludGVybmFsIGFuZCBleHRlcm5hbCAocm91dGVzLCBldGMpO1xuXG5jbGFzcyBtIHt9XG5cbm0uT0sgPSAnT0snO1xuXG5leHBvcnQgZGVmYXVsdCBtO1xuIiwiLyogZXNsaW50IGltcG9ydC9maXJzdDowLCBnbG9iYWwtcmVxdWlyZTowICovXG5pbXBvcnQgc291cmNlTWFwU3VwcG9ydCBmcm9tICdzb3VyY2UtbWFwLXN1cHBvcnQnO1xuXG5pbXBvcnQgZW52IGZyb20gJy4vY29uZmlnL2Vudic7XG5pbXBvcnQgYyBmcm9tICcuL2NvbmZpZy9jb25zdHMnO1xuXG4vLyBpbnN0YWxsIHRoZSBzb3VyY2VtYXAgaWYgaW4gZGVidWcgbW9kZSwgY2FuIGV4cGFuZCBvbiB3ZWJwYWNrIHNvdXJjZW1hcCB0eXBlcy5cbmlmIChlbnYuZGVidWcpIHtcbiAgc291cmNlTWFwU3VwcG9ydC5pbnN0YWxsKHtcbiAgICBlbnZpcm9ubWVudDogYy5OT0RFLFxuICB9KTtcbn1cblxuLy8gb25seSB1c2UgdGhlIHVuaGFuZGxlZCBwcm9taXNlIGVycm9yIG91dHB1dCBmb3IgZGVidWdnaW5nIGFuZCB0ZXN0aW5nLlxuaWYgKGVudi5kZWJ1Zykge1xuICByZXF1aXJlKCcuL3V0aWxzL3Byb2Nlc3NFdmVudHMnKTtcbn1cblxuaW1wb3J0IHsgYXBwLCBzZXJ2ZXIsIHN0YXJ0dXAsIHNodXRkb3duIH0gZnJvbSAnLi9leHByZXNzJztcblxuLy8gbGlzdGVuIGZvciBURVJNIHNpZ25hbCAuZS5nLiBraWxsXG5wcm9jZXNzLm9uKCdTSUdURVJNJywgKCkgPT4geyBjb25zb2xlLmxvZygnU0lHVEVSTScpOyBzaHV0ZG93bigpOyB9KTtcbi8vIGxpc3RlbiBmb3IgSU5UIHNpZ25hbCBlLmcuIEN0cmwtQ1xucHJvY2Vzcy5vbignU0lHSU5UJywgKCkgPT4geyBjb25zb2xlLmxvZygnU0lHSU5UJyk7IHNodXRkb3duKCk7IH0pO1xuXG4vLyBzdGFydHVwIHRoZSBodHRwIHNlcnZlciwgbW9uZ29vc2UsIHJlZGlzLCBldGMuXG5zdGFydHVwKCk7XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBhcHAsXG4gIHNlcnZlcixcbiAgc3RhcnR1cCxcbiAgc2h1dGRvd24sXG59O1xuIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwic291cmNlLW1hcC1zdXBwb3J0XCIpOyIsIi8qIGVzbGludCBpbXBvcnQvZmlyc3Q6MCwgZXNsaW50LWRpc2FibGUsIGVzbGludCBnbG9iYWwtcmVxdWlyZTowLCBuby1zaGFkb3c6MCAqL1xuaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJztcbmltcG9ydCBodHRwIGZyb20gJ2h0dHAnO1xuaW1wb3J0IGJvZHlQYXJzZXIgZnJvbSAnYm9keS1wYXJzZXInO1xuaW1wb3J0IGNvb2tpZVBhcnNlciBmcm9tICdjb29raWUtcGFyc2VyJztcbmltcG9ydCBjb3JzIGZyb20gJ2NvcnMnO1xuaW1wb3J0IGNzcmYgZnJvbSAnY3N1cmYnOyAvLyBodHRwczovL2dpdGh1Yi5jb20vZXhwcmVzc2pzL2NzdXJmXG5pbXBvcnQgaGVsbWV0IGZyb20gJ2hlbG1ldCc7XG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcbmltcG9ydCBmcyBmcm9tICdmcyc7XG5pbXBvcnQgY29tcHJlc3Npb24gZnJvbSAnY29tcHJlc3Npb24nO1xuaW1wb3J0IHJlc3BvbnNlVGltZSBmcm9tICdyZXNwb25zZS10aW1lJztcbmltcG9ydCBtZXRob2RPdmVycmlkZSBmcm9tICdtZXRob2Qtb3ZlcnJpZGUnO1xuXG5pbXBvcnQgYyBmcm9tICcuL2NvbmZpZy9jb25zdHMnO1xuaW1wb3J0IG1vbmdvIGZyb20gJy4vY29uZmlnL21vbmdvb3NlJztcbmltcG9ydCBlbnYgZnJvbSAnLi9jb25maWcvZW52JztcbmltcG9ydCBjb250cm9sbGVycyBmcm9tICcuL2NvbnRyb2xsZXJzJztcblxucmVxdWlyZSgnZG90ZW52LXNhZmUnKS5jb25maWcoKTtcblxuLy8gZ2xvYmFsIHZhcmlhYmxlcyBmb3IgdGhpcyBmaWxlOlxubGV0IGh0dHBTZXJ2ZXIgPSBudWxsO1xuY29uc3QgYXBwID0gZXhwcmVzcygpO1xuXG4vLyBzdGFydHVwIHNlcnZpY2VzOiBodHRwIHNlcnZlciwgbW9uZ29vc2UsIHJlZGlzLCBldGMuXG5jb25zdCBzdGFydHVwID0gYXN5bmMgKG92ZXJyaWRlUG9ydCkgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHBvcnQgPSBvdmVycmlkZVBvcnQgfHwgYXBwLmdldChjLlBPUlQpO1xuXG4gICAgLy8gY29ubmVjdCB0byBtb25nbyB0aHJvdWdoIG1vbmdvb3NlLlxuICAgIG1vbmdvLnNldERlYnVnKGVudi5kZWJ1Zyk7XG4gICAgYXdhaXQgbW9uZ28uY29ubmVjdCgpO1xuXG4gICAgLy8gY3JlYXRlIGh0dHAgc2VydmVyIHdyYXBwZXIgYXJvdW5kIGV4cHJlc3MgYXBwLlxuICAgIGh0dHBTZXJ2ZXIgPSBodHRwLmNyZWF0ZVNlcnZlcihhcHApO1xuICAgIGh0dHBTZXJ2ZXIubGlzdGVuKHBvcnQpO1xuXG4gICAgY29uc29sZS5sb2coJ2xpc3RlbmluZyBhdCBodHRwOi8vJXM6JWQnLCBlbnYuaG9zdCwgcG9ydCk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLmxvZygnRXJyb3I6ICcsIGUuc3RhY2spO1xuICB9XG5cbiAgcmV0dXJuIGh0dHBTZXJ2ZXI7XG59O1xuXG4vLyBncmFjZWZ1bGx5IHNodXRkb3duIHNlcnZpY2VzOiBodHRwIHNlcnZlciwgcmVkaXMsIG1vbmdvb3NlLCBldGMuXG5jb25zdCBzaHV0ZG93biA9IGFzeW5jIChjYW5FeGl0ID0gdHJ1ZSkgPT4ge1xuICBjb25zb2xlLmxvZyhgYXBwICcke2Vudi5hcHBOYW1lfScgdGVybWluYXRpbmcuYCk7XG4gIGNvbnNvbGUubG9nKCdjbG9zaW5nIHNlcnZlci4uLicpO1xuXG4gIHRyeSB7XG4gICAgYXdhaXQgaHR0cFNlcnZlci5jbG9zZSgpO1xuICAgIGNvbnNvbGUubG9nKCdleHByZXNzIHNlcnZlciBjbG9zZS4nKTtcblxuICAgIGF3YWl0IG1vbmdvb3NlLmNvbm5lY3Rpb24uY2xvc2UoKTtcbiAgICBjb25zb2xlLmxvZygnTW9uZ29vc2UgZGVmYXVsdCBjb25uZWN0aW9uIGRpc2Nvbm5lY3RlZC4nKTtcblxuICAgIC8vIGltcGVyYXRpdmUgdG8gcmVtb3ZlIGFsbCBldmVudCBsaXN0ZW5lcnMuXG4gICAgbW9uZ29vc2UuY29ubmVjdGlvbi5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUubG9nKCdVbmNhdWdodCBTaHV0ZG93biBFcnJvcjonLCBlLnN0YWNrKTtcbiAgfVxuXG4gIGNvbnNvbGUubG9nKCdGaW5hbGx5IGV4aXRpbmcuJyk7XG4gIGlmIChjYW5FeGl0KSB7XG4gICAgcHJvY2Vzcy5leGl0KDEpO1xuICB9XG5cbiAgcmV0dXJuIG51bGw7XG59O1xuXG5cbmFwcC51c2UoaGVsbWV0KCkpO1xuXG5hcHAuZGlzYWJsZSgneC1wb3dlcmVkLWJ5Jyk7XG5cblxuYXBwLnVzZShyZXNwb25zZVRpbWUoKSk7XG5hcHAudXNlKGNvbXByZXNzaW9uKCkpO1xuYXBwLnVzZShjb3JzKHtcbiAgb3JpZ2luOiAnKicsXG4gIGNyZWRlbnRpYWxzOiB0cnVlLFxuICBvcHRpb25zU3VjY2Vzc1N0YXR1czogMjAwLFxuICBhbGxvd2VkSGVhZGVyczogWydDb250ZW50LVR5cGUnLCAnQXV0aG9yaXphdGlvbicsICdBY2NlcHQnLCAnQWNjZXB0LUVuY29kaW5nJ10sXG59KSk7XG5hcHAudXNlKGJvZHlQYXJzZXIudXJsZW5jb2RlZCh7IGV4dGVuZGVkOiBmYWxzZSB9KSk7XG5cbmFwcC51c2UoKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIGJvZHlQYXJzZXIuanNvbih7XG4gICAgdmVyaWZ5KHJlcSwgcmVzLCBidWYsIGVuY29kaW5nKSB7XG4gICAgICByZXEucmF3Qm9keSA9IGJ1Zi50b1N0cmluZygpO1xuICAgIH0sXG4gIH0pKHJlcSwgcmVzLCAoZXJyKSA9PiB7XG4gICAgaWYgKGVycikge1xuICAgICAgY29uc3QgbXNnID0gZXJyLm1lc3NhZ2UuaW5kZXhPZignSlNPTicpICE9PSAtMSA/IGVyci5tZXNzYWdlIDogJ2ludGVybmFsIGVycm9yJztcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKHtcbiAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICBzdGF0dXM6IDUwMCxcbiAgICAgICAgICBtc2csXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgY29uc29sZS5sb2coYy5FUlJPUiwge1xuICAgICAgICBzdGF0dXM6IGVyci5zdGF0dXMgfHwgNTAwLFxuICAgICAgICBtZXNzYWdlOiBlcnIubXNnLFxuICAgICAgICBlcnJvcjogZXJyLFxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5leHQoKTtcbiAgICB9XG4gIH0pO1xufSk7XG5cbmFwcC51c2UoY29va2llUGFyc2VyKCkpO1xuXG5hcHAuc2V0KCd0cnVzdCBwcm94eScsIHRydWUpO1xuYXBwLnNldChjLlBPUlQsIGVudi5wb3J0KTtcblxuLy8gVE9ETzogbmVlZCB0byByZXZpZXcgYmVzdCBwcmFjdGljZSBmb3IgbW9yZ2FuIGFuZCBmaXggbG9nZXIuc3RyZWFtIGNvbnNvbGUgaXNzdWUuXG5pZiAoZW52LmRlYnVnICYmIGVudi5kZWJ1Z0V4cHJlc3MpIHtcbiAgY29uc29sZS5sb2coXCJPdmVycmlkaW5nICdFeHByZXNzJyBsb2dnZXJcIik7XG59XG5cbmFwcC51c2UoY29udHJvbGxlcnMpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgYXBwLFxuICBodHRwU2VydmVyLFxuICBzdGFydHVwLFxuICBzaHV0ZG93bixcbn07XG4iLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJib2R5LXBhcnNlclwiKTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJjb29raWUtcGFyc2VyXCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImNvcnNcIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiY3N1cmZcIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiaGVsbWV0XCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImZzXCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImNvbXByZXNzaW9uXCIpOyIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcInJlc3BvbnNlLXRpbWVcIik7IiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwibWV0aG9kLW92ZXJyaWRlXCIpOyIsImltcG9ydCBtb25nb29zZSBmcm9tICdtb25nb29zZSc7XG5cbmltcG9ydCBNb2RlbHMgZnJvbSAnLi4vbW9kZWxzL01vZGVscyc7XG5pbXBvcnQgZW52IGZyb20gJy4vZW52JztcbmltcG9ydCBjIGZyb20gJy4uL2NvbmZpZy9jb25zdHMnO1xuaW1wb3J0IGggZnJvbSAnLi4vdXRpbHMvaGVscGVyJztcblxuY29uc3Qgc3RhdGUgPSB7XG4gIGRiOiBudWxsLFxuICB0ZXN0OiBmYWxzZSxcbn07XG5cbmNvbnN0IGdldCA9ICgpID0+IHN0YXRlLmRiO1xuXG5jb25zdCBzZXRBc1Rlc3QgPSAoKSA9PiB7XG4gIHN0YXRlLnRlc3QgPSB0cnVlO1xufTtcblxuY29uc3QgY3JlYXRlSW5kZXhlcyA9IGFzeW5jICgpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBtb2RlbHMgPSBNb2RlbHMuYWxsO1xuICAgIGF3YWl0IGguYXN5bmNGb3JFYWNoKE9iamVjdC5rZXlzKG1vZGVscyksIGFzeW5jIChtb2RlbCkgPT4ge1xuICAgICAgaWYgKG1vZGVsc1ttb2RlbF0gJiYgbW9kZWxzW21vZGVsXS5Nb2RlbCkge1xuICAgICAgICBpZiAobW9kZWxzW21vZGVsXS5Nb2RlbC5jb2xsZWN0aW9uKSB7XG4gICAgICAgICAgYXdhaXQgbW9kZWxzW21vZGVsXS5Nb2RlbC5jb2xsZWN0aW9uLmdldEluZGV4ZXMoKTtcbiAgICAgICAgICBhd2FpdCBtb2RlbHNbbW9kZWxdLk1vZGVsLmNvbGxlY3Rpb24uZHJvcEluZGV4ZXMoKTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBtb2RlbHNbbW9kZWxdLk1vZGVsLmNyZWF0ZUluZGV4ZXMoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUubG9nKGUpO1xuICAgIHJldHVybiBoLnVuaGFuZGxlZEVycm9yT2JqZWN0KGUpO1xuICB9XG59O1xuXG5cbi8vIHByaW50IG1vbmdvb3NlIGxvZ3MgaW4gZGV2IGVudlxuY29uc3Qgc2V0RGVidWcgPSAoZGVidWcpID0+IHtcbiAgaWYgKGVudi5kZWJ1Z0RiKSB7XG4gICAgLy8gVE9ETyBtYWtlIHRoaXMgYW4gZW52aXJvbm1lbnQgdmFyaWFibGUuXG4gICAgbW9uZ29vc2UuY29ubmVjdGlvbi5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcbiAgICBtb25nb29zZS5zZXQoYy5ERUJVRywgdHJ1ZSk7XG4gICAgaWYgKGVudi5kZWJ1Zykge1xuICAgICAgY29uc29sZS5sb2coYHN0YXJ0aW5nIGluIGRlYnVnIG1vZGU7IGVudj0ke2Vudi5lbnZpcm9ubWVudH1gKTtcbiAgICB9W1xuICAgICAgYy5DT05ORUNUSU5HLFxuICAgICAgYy5DT05ORUNURUQsXG4gICAgICBjLk9QRU4sXG4gICAgICBjLkRJU0NPTk5FQ1RJTkcsXG4gICAgICBjLkRJU0NPTk5FQ1RFRCxcbiAgICAgIGMuQ0xPU0UsXG4gICAgICBjLlJFQ09OTkVDVEVELFxuICAgICAgYy5FUlJPUixcbiAgICAgIGMuQUxMLFxuICAgICAgYy5JTkRFWCxcbiAgICBdLmZvckVhY2goKGV2ZW50KSA9PiB7XG4gICAgICBtb25nb29zZS5jb25uZWN0aW9uLm9uKGV2ZW50LCAoKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGBNb25nb29zZSBldmVudCAke2V2ZW50fWApO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbn07XG5cbi8qKlxuICogQ29ubmVjdCB0byBtb25nbyBkYlxuICpcbiAqIEByZXR1cm5zIHtvYmplY3R9IE1vbmdvb3NlIGNvbm5lY3Rpb25cbiAqIEBwdWJsaWNcbiAqL1xuY29uc3QgY29ubmVjdCA9IGFzeW5jICh1cmksIGRiKSA9PiB7XG4gIGNvbnN0IG1vbmdvVXJpID0gdXJpIHx8IGAke2Vudi5tb25nby51cml9YDtcbiAgY29uc3QgZGJOYW1lID0gZGIgfHwgYCR7ZW52Lm1vbmdvLmRiTmFtZX1gO1xuXG4gIGNvbnN0IG9wdHMgPSB7XG4gICAgZGJOYW1lOiBkYk5hbWUgfHwgZW52Lm1vbmdvLmRiTmFtZSxcbiAgICByZWNvbm5lY3RUcmllczogNSxcbiAgICByZWNvbm5lY3RJbnRlcnZhbDogNTAwLCAvLyBSZWNvbm5lY3QgZXZlcnkgNTAwbXNcbiAgICBrZWVwQWxpdmU6IHRydWUsXG4gICAgY29uZmlnOiB7XG4gICAgICBhdXRvSW5kZXg6IGZhbHNlLFxuICAgICAgYmFja2dyb3VuZDogZmFsc2UsXG4gICAgfSxcbiAgfTtcblxuICBpZiAoZW52LmRlYnVnKSB7XG4gICAgY29uc29sZS5sb2coYG1vbmdvIFVyaTogJHttb25nb1VyaX1gKTtcbiAgICBjb25zb2xlLmxvZyhgbW9uZ28gRGI6ICR7ZGJOYW1lfWApO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBjb25zdCBjb25uID0gYXdhaXQgbW9uZ29vc2UuY29ubmVjdChtb25nb1VyaSwgb3B0cyk7XG4gICAgc3RhdGUuZGIgPSBjb25uO1xuICAgIHJldHVybiBzdGF0ZS5kYjtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUubG9nKCdFcnJvcjogJywgZS5zdGFjayk7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgZ2V0LFxuICBzZXRBc1Rlc3QsXG4gIHNldERlYnVnLFxuICBjb25uZWN0LFxuICBjcmVhdGVJbmRleGVzLFxufTtcbiIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIm1vbWVudFwiKTsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJ1dWlkL3Y0XCIpOyIsIi8qIGVzbGludCBuby12b2lkOiAwICovXG5pbXBvcnQgeyBTY2hlbWEgfSBmcm9tICdtb25nb29zZSc7XG5pbXBvcnQgbW9kZWxzIGZyb20gJy4uL2NvbnN0cy9tb2RlbHMnO1xuaW1wb3J0IGMgZnJvbSAnLi4vLi4vY29uZmlnL2NvbnN0cyc7XG5cbmNvbnN0IFVzZXJTY2hlbWEgPSBuZXcgU2NoZW1hKHtcbiAgLy8gaGFzaGlkXG4gIHVzZXJJZDogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXG4gIHVzZXI6IHsgLy8gdGhpcyBpcyBhY3R1YWxseSB1c2VybmFtZSwgYnV0IHRoZSBzcGVjcyBjYWxsZWQgZm9yIHVzZXJcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgbWlubGVuZ3RoOiAyLFxuICAgIG1heGxlbmd0aDogMTYsXG4gIH0sXG59LCB7IGF1dG9JbmRleDogdHJ1ZSwgdGltZXN0YW1wczogdHJ1ZSwgY29sbGVjdGlvbjogbW9kZWxzLnVzZXIgfSk7XG5cblVzZXJTY2hlbWEuaW5kZXgoeyBhY2NvdW50SWQ6IDEsIHVzZXI6IDEgfSwgeyB1bmlxdWU6IHRydWUgfSk7XG5Vc2VyU2NoZW1hLmluZGV4KHsgYWNjb3VudElkOiAxLCB1c2VySWQ6IDEgfSwgeyB1bmlxdWU6IHRydWUgfSk7XG5cbmV4cG9ydCBkZWZhdWx0IFVzZXJTY2hlbWE7XG4iLCJpbXBvcnQgbSBmcm9tICcuL21lc3NhZ2VzJztcbmltcG9ydCBjIGZyb20gJy4vY29uc3RzJztcblxuY2xhc3MgZWMge31cblxuZWMuSU5URVJOQUxfRVJST1IgPSB7XG4gIGlkOiA1MDAsXG4gIHN0YXR1czogNTAwLFxuICBtc2c6ICdpbnRlcm5hbCBlcnJvci4nLFxufTtcblxuZWMuRU5VTV9QUk9QX05PVF9GT1VORCA9IHtcbiAgaWQ6IDEwMDAxLFxuICBzdGF0dXM6IDQwMCxcbiAgbXNnOiAnZW51bSBwcm9wZXJ0eSBkb2VzIG5vdCBleGlzdC4nLFxufTtcblxuZWMuSU5WQUxJRF9GSUVMRF9TT1VSQ0VfVFlQRSA9IHtcbiAgaWQ6IDEwMDAxLFxuICBzdGF0dXM6IDQwMCxcbiAgbXNnOiAnaW52YWxpZCBzb3VyY2UgZmllbGQgdHlwZSwgdXNlOiBwYXJhbXMgb3IgYm9keS4nLFxufTtcblxuZWMuSU5WQUxJRF9WQUxJREFUSU9OX0ZJRUxEID0ge1xuICBpZDogMTAwMDIsXG4gIHN0YXR1czogNDAwLFxuICBtc2c6ICd0aGF0IHZhbGlkYXRpb24gZmllbGQgaXMgbm90IGluIHRoZSB2YWxpZGF0aW9uIG1hcC4nLFxufTtcblxuZWMuVEVTVCA9IHtcbiAgaWQ6IDEsXG4gIHN0YXR1czogMSxcbiAgbXNnOiAndGVzdCcsXG59O1xuXG5PYmplY3QuZnJlZXplKGVjKTtcblxuZXhwb3J0IGRlZmF1bHQgZWM7XG4iLCIvKiBlc2xpbnQgY2xhc3MtbWV0aG9kcy11c2UtdGhpczogMCwgbWF4LWxlbjogMCwgdmFsaWQtdHlwZW9mOjAsIG5vLWVtcHR5LWZ1bmN0aW9uOjAgKi9cbmltcG9ydCBtb25nb29zZSBmcm9tICdtb25nb29zZSc7XG5cbmltcG9ydCBJbWFnZVNjaGVtYSBmcm9tICcuL3NjaGVtYXMvSW1hZ2VTY2hlbWEnO1xuaW1wb3J0IFVzZXIgZnJvbSAnLi9Vc2VyJztcblxuaW1wb3J0IGMgZnJvbSAnLi4vY29uZmlnL2NvbnN0cyc7XG5pbXBvcnQgc2MgZnJvbSAnLi4vY29uZmlnL3N0YXR1c0NvZGVzJztcbmltcG9ydCBtb2RlbHMgZnJvbSAnLi9jb25zdHMvbW9kZWxzJztcbmltcG9ydCBoLCB7IHN0YXR1c09iamVjdCB9IGZyb20gJy4uL3V0aWxzL2hlbHBlcic7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEltYWdlIHtcbiAgc3RhdGljIGdldCBNb2RlbCgpIHtcbiAgICByZXR1cm4gbW9uZ29vc2UubW9kZWwobW9kZWxzLkltYWdlLCBJbWFnZVNjaGVtYSk7XG4gIH1cblxuICBnZXQgTW9kZWwoKSB7XG4gICAgcmV0dXJuIEltYWdlLk1vZGVsO1xuICB9XG5cbiAgLypcbiAgICByZXR1cm5zIGFuIGFycmF5IG9mIGltYWdlcyB3aGV0aGVyIG1vZGVyYXRvcmVkIG9yIG5vdC5cbiAgICBHRVQgL2FwaS9pbWFnZS9saXN0L3tmaWx0ZXJ9XG5cbiAgKi9cblxuICBhc3luYyBsaXN0KHJlcSA9IHt9KSB7XG4gICAgY29uc3QgeyBmaWx0ZXIgPSAnYWxsJyB9ID0gcmVxLnBhcmFtcztcbiAgICBjb25zdCBmaWx0ZXJzID0gWydhbGwnLCAncGVuZGluZycsICdhcHByb3ZlZCcsICdyZWplY3RlZCddO1xuXG4gICAgaWYgKCFmaWx0ZXJzLmluY2x1ZGVzKGZpbHRlcikpIHtcbiAgICAgIHJldHVybiBzYy5JTlZBTElEX0xJU1RfRklMVEVSO1xuICAgIH1cblxuICAgIGxldCBmaW5kID0ge307XG5cbiAgICBzd2l0Y2ggKGZpbHRlcikge1xuICAgICAgY2FzZSAncGVuZGluZyc6XG4gICAgICAgIGZpbmQgPSB7IGFwcHJvdmVkOiB7ICRleGlzdHM6IGZhbHNlIH0sIG1vZGVyYXRvcklkOiB7ICRleGlzdHM6IGZhbHNlIH0gfTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdhcHByb3ZlZCc6XG4gICAgICAgIGZpbmQgPSB7IGFwcHJvdmVkOiB0cnVlIH07XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAncmVqZWN0ZWQnOlxuICAgICAgICBmaW5kID0geyBhcHByb3ZlZDogZmFsc2UgfTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBmaW5kID0ge307XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBJbWFnZS5Nb2RlbC5maW5kKGZpbmQpLnNvcnQoeyB0czogMSB9KS5sZWFuKCk7XG5cbiAgICAgIHJldHVybiB7IHN0YXR1czogc2MuU1VDQ0VTUy5zdGF0dXMsIGRhdGE6IHsgbWVzc2FnZTogZGF0YSB9IH07XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIGgudW5oYW5kbGVkRXJyb3JPYmplY3QoZSk7XG4gICAgfVxuICB9XG5cbiAgLypcbiAgICByZXR1cm5zIGFuIGFycmF5IG9mIDEgaW1hZ2Ugb3IgZW1wdHkgYXJyYXkgZm9yIHRoZSBuZXh0IHVubW9kZXJhdGVkIGltYWdlLlxuICAgIEdFVCAvYXBpL2ltYWdlL25leHRcblxuICAqL1xuXG4gIGFzeW5jIG5leHRVbm1vZGVyYXRlZChyZXEgPSB7fSkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBkYXRhID0gYXdhaXQgSW1hZ2UuTW9kZWwuZmluZCh7XG4gICAgICAgIGFwcHJvdmVkOiB7ICRleGlzdHM6IGZhbHNlIH0sXG4gICAgICAgIG1vZGVyYXRvcklkOiB7ICRleGlzdHM6IGZhbHNlIH0sXG4gICAgICB9KS5zb3J0KHsgdHM6IDEgfSkubGltaXQoMSk7XG5cbiAgICAgIHJldHVybiB7IHN0YXR1czogc2MuU1VDQ0VTUy5zdGF0dXMsIGRhdGE6IHsgbWVzc2FnZTogZGF0YSB9IH07XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIGgudW5oYW5kbGVkRXJyb3JPYmplY3QoZSk7XG4gICAgfVxuICB9XG5cbiAgLypcbiAgICB1cGRhdGVzIGFuIGltYWdlIHdpdGggdGhlIGlkIG9mIHRoZSBpbWFnZSwgYXBwcm92ZWQgYm9vbGVhbiAodHJ1ZS9mYWxzZSkgYW5kIG1vZGVyYXRvcklkICh1c2VySWQpO1xuICAgIFBVVCAvYXBpL2ltYWdlL3VwZGF0ZVxuXG4gICovXG5cbiAgYXN5bmMgbW9kZXJhdGUocmVxID0ge30pIHtcbiAgICBjb25zdCB7IGltYWdlSWQsIHVzZXIsIGFwcHJvdmVkIH0gPSByZXEuYm9keTtcblxuICAgIGNvbnNvbGUubG9nKGltYWdlSWQsIHVzZXIsIGFwcHJvdmVkKTtcblxuICAgIGlmICghaW1hZ2VJZCB8fCAhdXNlciB8fCB0eXBlb2YgYXBwcm92ZWQgIT09ICdib29sZWFuJykge1xuICAgICAgcmV0dXJuIHNjLklOVkFMSURfTU9ERVJBVElPTl9GSUVMRFM7XG4gICAgfVxuXG4gICAgLy8gbWFrZSBzdXJlIHRoZSB1c2VyIGV4aXN0c1xuICAgIGNvbnN0IHUgPSBhd2FpdCBVc2VyLk1vZGVsLmZpbmQoeyB1c2VyIH0pLmxlYW4oKTtcbiAgICBpZiAodS5sZW5ndGggPCAxKSB7XG4gICAgICByZXR1cm4gc2MuVVNFUl9ET0VTTlRfRVhJU1Q7XG4gICAgfVxuXG4gICAgY29uc3QgeyBPYmplY3RJZCB9ID0gbW9uZ29vc2UuVHlwZXM7XG5cbiAgICAvLyB1cGRhdGUgMSBpbWFnZVxuICAgIHRyeSB7XG4gICAgICBjb25zdCB1cGRhdGVkID0gYXdhaXQgSW1hZ2UuTW9kZWwudXBkYXRlT25lKFxuICAgICAgICB7IF9pZDogbmV3IE9iamVjdElkKGltYWdlSWQpIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAkc2V0OiB7XG4gICAgICAgICAgICBtb2RlcmF0b3JJZDogdVswXS51c2VySWQsXG4gICAgICAgICAgICBhcHByb3ZlZCxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgKTtcblxuICAgICAgLy8gY2hlY2sgd2hhdCB3YXMgcmV0dXJuIHRvIHNlZSBpZiBpbWFnZSB3YXMgdXBkYXRlZCwgbk1vZGlmaWVkIHNob3VsZCA9PT0gMTtcbiAgICAgIHJldHVybiB7IHN0YXR1czogc2MuU1VDQ0VTUy5zdGF0dXMsIGRhdGE6IHsgbWVzc2FnZTogdXBkYXRlZC5uTW9kaWZpZWQgPT09IDEgfSB9O1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJldHVybiBoLnVuaGFuZGxlZEVycm9yT2JqZWN0KGUpO1xuICAgIH1cbiAgfVxuXG4gIC8qXG4gICAgcmV0dXJucyBhbiBhcnJheSBvZiB0aGUgbGFzdCA1IGltYWdlcyB0aGF0IGhhdmUgYmVlbiBtb2RlcmF0ZWQgYnkgdGhpcyB1c2VyIG9yIHJldHVybiBlbXB0eSBhcnJheVxuICAgIEdFVCAvYXBpL2ltYWdlL2xpc3RcblxuICAqL1xuXG4gIGFzeW5jIG1vZGVyYXRlZChyZXEgPSB7fSkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IHVzZXIgfSA9IHJlcS5xdWVyeTtcblxuICAgICAgaWYgKCF1c2VyKSB7XG4gICAgICAgIHJldHVybiBzYy5VU0VSX0RPRVNOVF9FWElTVDtcbiAgICAgIH1cblxuICAgICAgLy8gbWFrZSBzdXJlIHRoZSB1c2VyIGV4aXN0c1xuICAgICAgY29uc3QgdSA9IGF3YWl0IFVzZXIuTW9kZWwuZmluZCh7IHVzZXIgfSkubGVhbigpO1xuICAgICAgaWYgKHUubGVuZ3RoIDwgMSkge1xuICAgICAgICByZXR1cm4gc2MuVVNFUl9ET0VTTlRfRVhJU1Q7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBJbWFnZS5Nb2RlbC5maW5kKHsgbW9kZXJhdG9ySWQ6IHVbMF0udXNlcklkIH0pXG4gICAgICAgIC5zb3J0KHsgdXBkYXRlZEF0OiAtMSB9KS5saW1pdCg1KS5za2lwKDApXG4gICAgICAgIC5sZWFuKCk7XG5cbiAgICAgIHJldHVybiB7IHN0YXR1czogc2MuU1VDQ0VTUy5zdGF0dXMsIGRhdGE6IHsgbWVzc2FnZTogZGF0YSB9IH07XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIGgudW5oYW5kbGVkRXJyb3JPYmplY3QoZSk7XG4gICAgfVxuICB9XG5cbiAgLypcbiAgICB1dGlsaXR5IG1ldGhvZCB0byBjbGVhciB0aGUgZGIgZm9yIHRlc3RpbmcgcHVycG9zZXM7XG4gICAgd2lsbCByZW1vdmUgYXBwcm92ZWQgYW5kIG1vZGVyYXRvcklkIGZpZWxkcyB0byB0ZXN0IHRoaXMgZXhhbXBsZSBvdmVyIGFuZCBvdmVyIGFnYWluLlxuICAgIEdFVCAvYXBpL2ltYWdlL2NsZWFyXG5cbiAgKi9cblxuICBhc3luYyBjbGVhcihyZXEgPSB7fSkge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCB1cGRhdGVkID0gYXdhaXQgSW1hZ2UuTW9kZWwudXBkYXRlTWFueShcbiAgICAgICAge30sXG4gICAgICAgIHtcbiAgICAgICAgICAkdW5zZXQ6IHtcbiAgICAgICAgICAgIG1vZGVyYXRvcklkOiBudWxsLFxuICAgICAgICAgICAgYXBwcm92ZWQ6IG51bGwsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICk7XG5cbiAgICAgIHJldHVybiB7IHN0YXR1czogc2MuU1VDQ0VTUy5zdGF0dXMsIGRhdGE6IHsgbWVzc2FnZTogdXBkYXRlZCB9IH07XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIGgudW5oYW5kbGVkRXJyb3JPYmplY3QoZSk7XG4gICAgfVxuICB9XG59XG4iLCIvKiBlc2xpbnQgbm8tdm9pZDogMCAqL1xuaW1wb3J0IHsgU2NoZW1hIH0gZnJvbSAnbW9uZ29vc2UnO1xuaW1wb3J0IG1vZGVscyBmcm9tICcuLi9jb25zdHMvbW9kZWxzJztcbmltcG9ydCBjIGZyb20gJy4uLy4uL2NvbmZpZy9jb25zdHMnO1xuXG5jb25zdCBJbWFnZVNjaGVtYSA9IG5ldyBTY2hlbWEoe1xuICAvLyBoYXNoaWRcbiAgdHM6IHsgdHlwZTogTnVtYmVyLCByZXF1aXJlZDogdHJ1ZSB9LFxuICB1cmw6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSB9LFxuICBtb2RlcmF0b3JJZDogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IHZvaWQgMCB9LFxuICBhcHByb3ZlZDogeyB0eXBlOiBCb29sZWFuLCBkZWZhdWx0OiB2b2lkIDAgfSxcbn0sIHsgYXV0b0luZGV4OiB0cnVlLCB0aW1lc3RhbXBzOiB0cnVlLCBjb2xsZWN0aW9uOiBtb2RlbHMuaW1hZ2UgfSk7XG5cbkltYWdlU2NoZW1hLmluZGV4KHsgdHM6IDEgfSk7XG5JbWFnZVNjaGVtYS5pbmRleCh7IHVybDogMSB9LCB7IHVuaXF1ZTogdHJ1ZSB9KTtcblxuZXhwb3J0IGRlZmF1bHQgSW1hZ2VTY2hlbWE7XG4iLCJpbXBvcnQgZXhwcmVzcyBmcm9tICdleHByZXNzJztcbmltcG9ydCBodHRwIGZyb20gJ2h0dHAnO1xuXG5pbXBvcnQgYyBmcm9tICcuLi9jb25maWcvY29uc3RzJztcbmltcG9ydCBzYyBmcm9tICcuLi9jb25maWcvc3RhdHVzQ29kZXMnO1xuXG4vLyBpbXBvcnQgVXNlciBmcm9tICcuL1VzZXInO1xuaW1wb3J0IEltYWdlIGZyb20gJy4vSW1hZ2UnO1xuaW1wb3J0IE1vZGVscyBmcm9tICcuLi9tb2RlbHMvTW9kZWxzJztcblxuY29uc3Qgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcbmNvbnN0IGJhc2UgPSAnL2FwaS92MSc7IC8vIGhhcmQgY29kZSBsYW5nIGZvciBub3cuIG1ha2UgZHluYW1pYyB3aGVuIG5lZWRlZC5cbmNvbnN0IG1vZGVscyA9IE1vZGVscy5hbGw7XG5cbi8vIHJvdXRlci51c2UoYCR7YmFzZX0vdXNlcmAsIFVzZXIucm91dGVzKG1vZGVscy51c2VyKSk7XG5yb3V0ZXIudXNlKGAke2Jhc2V9L2ltYWdlYCwgSW1hZ2Uucm91dGVzKG1vZGVscy5pbWFnZSkpO1xuXG4vLyBjYXRjaCA0MDQgYW5kIGZvcndhcmQgdG8gZXJyb3IgaGFuZGxlclxucm91dGVyLnVzZSgocmVxLCByZXMsIG5leHQpID0+IHtcbiAgY29uc3QgZXJyID0gbmV3IEVycm9yKCdOb3QgRm91bmQnKTtcbiAgZXJyLnN0YXR1cyA9IDQwNDtcbiAgbmV4dChlcnIpO1xufSk7XG5cbi8vIGVycm9yIGhhbmRsZXJcbnJvdXRlci51c2UoKGVyciwgcmVxLCByZXMsIG5leHQpID0+IHtcbiAgY29uc3Qgc3RhdHVzID0gZXJyLnN0YXR1cyA/IGVyci5zdGF0dXMgOiA1MDA7XG4gIGxldCBtc2cgPSBgJHtzdGF0dXN9OiAke2Vyci5tZXNzYWdlfWA7XG5cbiAgaWYgKCFBcnJheS5pc0FycmF5KG1zZykpIHtcbiAgICBtc2cgPSBbbXNnXTtcbiAgfVxuXG4gIGNvbnN0IHJlc3BvbnNlID0geyBlcnJvcnM6IG1zZyB9O1xuICBpZiAoZXJyLmRhdGEpIHtcbiAgICByZXNwb25zZS5lcnJvcnMgPSBlcnIuZGF0YTtcbiAgfVxuXG4gIHJlcy5zdGF0dXMoc3RhdHVzKS5zZW5kKHJlc3BvbnNlKTtcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCByb3V0ZXI7XG4iLCJpbXBvcnQgZXhwcmVzcyBmcm9tICdleHByZXNzJztcblxuaW1wb3J0IGMgZnJvbSAnLi4vY29uZmlnL2NvbnN0cyc7XG5pbXBvcnQgc2MgZnJvbSAnLi4vY29uZmlnL3N0YXR1c0NvZGVzJztcbmltcG9ydCBoLCB7IGFzeW5jZWQgfSBmcm9tICcuLi91dGlscy9oZWxwZXInO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBJbWFnZSB7XG4gIHN0YXRpYyByb3V0ZXMobSkge1xuICAgIGNvbnN0IHIgPSBleHByZXNzLlJvdXRlcigpO1xuXG4gICAgLy8gY2xlYXIgdGhlIGltYWdlIHRhYmxlIHRvIHJlc2V0IHVubW9kZXJhdGVkXG4gICAgci5nZXQoJy9jbGVhcicsIGFzeW5jICguLi5wKSA9PiB7IGF3YWl0IGFzeW5jZWQobSwgJ2NsZWFyJywgcCk7IH0pO1xuXG4gICAgLy8gbGlzdCBpbWFnZXMgaW4gZGI7IHNvcnRlZCBkZXNjZW5kaW5nIGJ5IHRpbWVzdGFtcFxuICAgIHIuZ2V0KCcvbGlzdCcsIGFzeW5jICguLi5wKSA9PiB7IGF3YWl0IGFzeW5jZWQobSwgJ2xpc3QnLCBwKTsgfSk7XG4gICAgLy8gZmlsZXIgY2FuIGJlIGFsbCwgYXBwcm92ZWQsIHBlbmRpbmcsIHJlamVjdGVkXG4gICAgci5nZXQoJy9saXN0LzpmaWx0ZXInLCBhc3luYyAoLi4ucCkgPT4geyBhd2FpdCBhc3luY2VkKG0sICdsaXN0JywgcCk7IH0pO1xuXG4gICAgLy8gcmV0dXJuIHRoZSBuZXh0IDEgdW5tb2RlcmF0ZWQgaW1hZ2UgaW4gcXVldWU7IHNvcnQgYXNjZW5kaW5nIHRpbWVzdGFtcDtcbiAgICByLmdldCgnL25leHQnLCBhc3luYyAoLi4ucCkgPT4geyBhd2FpdCBhc3luY2VkKG0sICduZXh0VW5tb2RlcmF0ZWQnLCBwKTsgfSk7XG5cbiAgICAvLyBtb2RlcmF0ZSBhbiBpbWFnZTsgc2V0IGFwcHJvdmVkID0gdHJ1ZS9mYWxzZTsgc2V0IHVzZXJJZDtcbiAgICByLnB1dCgnL21vZGVyYXRlJywgYXN5bmMgKC4uLnApID0+IHsgYXdhaXQgYXN5bmNlZChtLCAnbW9kZXJhdGUnLCBwKTsgfSk7XG5cbiAgICAvLyBhcGkvdXNlci9sYXN0LW1vZGVyYXRlZC8/dXNlcj11c2VyaWQmbGltaXQ9eCZvZmZzZXQ9eVxuICAgIHIuZ2V0KCcvbW9kZXJhdGVkJywgYXN5bmMgKC4uLnApID0+IHsgYXdhaXQgYXN5bmNlZChtLCAnbW9kZXJhdGVkJywgcCk7IH0pO1xuXG4gICAgY29uc29sZS5sb2coJyMjIyMnKTtcbiAgICByZXR1cm4gcjtcbiAgfVxufVxuIiwiaW1wb3J0IGVudiBmcm9tICcuLi9jb25maWcvZW52JztcbmltcG9ydCBjIGZyb20gJy4uL2NvbmZpZy9jb25zdHMnO1xuXG4vLyBvbmx5IHVzZSB0aGlzIGZvciBkZWJ1Z2dpbmcgYW5kIHRlc3Rpbmc7IG5ldmVyIG5vbi1kZWJ1ZyBwcm9kdWN0aW9uLlxuLy8gc29tZXRpbWVzIHByb21pc2UgZXJyb3JzIHNsaXAgdGhyb3VnaCBkdXJpbmcgZGVidWdnaW5nLlxuaWYgKGVudi5kZWJ1Zykge1xuICBwcm9jZXNzLm9uKCd1bmhhbmRsZWRSZWplY3Rpb24nLCAocmVhc29uLCBwKSA9PiB7XG4gICAgY29uc29sZS5sb2coJ3VuaGFuZGxlZFJlamVjdGlvbi4uLicpO1xuICAgIGxldCBwcm9tID0gJyc7XG4gICAgaWYgKHApIHtcbiAgICAgIHByb20gPSBgVW5oYW5kbGVkIFJlamVjdGlvbiBhdDogUHJvbWlzZSR7cH1gO1xuICAgIH1cbiAgICBjb25zb2xlLmxvZygncmVhc29uOicsIHByb20sIHJlYXNvbik7XG4gICAgLy8gYXBwbGljYXRpb24gc3BlY2lmaWMgbG9nZ2luZywgdGhyb3dpbmcgYW4gZXJyb3IsIG9yIG90aGVyIGxvZ2ljIGhlcmVcbiAgfSk7XG5cbiAgcHJvY2Vzcy5vbigndW5jYXVnaHRFeGNlcHRpb24nLCAoZSkgPT4ge1xuICAgIC8vIGhhbmRsZSB0aGUgZXJyb3Igc2FmZWx5XG4gICAgY29uc29sZS5sb2coJ0Vycm9yOiAnLCBlLnN0YWNrKTtcbiAgfSk7XG59XG4iXSwic291cmNlUm9vdCI6IiJ9